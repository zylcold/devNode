## 耗电优化
iOS 设备耗电的主要来源有一下几种
![[3fbd1afde32a4aba8e16de4c60d27eab~tplv-k3u1fbpfcp-zoom-1.image.png]]

* CPU处理 **Processing**
* 网络 **Networking**
* 定位 **Location**
* 图像 **Graphics**


### 耗电优化方案
* 尽可能降低CPU、GPU功耗
* 少用定时器
* 优化I/O操作
	1. 尽量不要频繁的进行数据写入操作，最好批量一次性写入
	2. 读写大量重要数据时，考虑用dispatch_io，它提供了基于GCD的异步操作文件I/O的API。使用它时，系统会优化磁盘的访问
	3. 数据量比较大的话，建议使用数据库
* 网络优化
	1. 减少、压缩网络数据
	2. 如果多次请求的结果是相同的，尽量使用缓存
	3. 使用断点续传，否则网络不稳定时可能会导致多次传输相同内容
	4. 网络不可用时，不要尝试执行网络请求
	5. 让用户取消长时间运行或者速度很慢的网络操作，设置合适的超时时间
	6. 批量传输，比如，下载视频流是，不要传输很小的数据包，直接下载整个文件或者一大块一大块下载。如果下载广告，一次性多下载一些，然后慢慢的拿出来展示。如果狭隘电子邮件，就一次下载多封，不要一封一封下载
* 定位优化
	1. 如果只是需要确定用户的位置，最好用CLLocationManager的requestLocation方法。定位完成后，会自动让定位硬件断电。
	2. 如果不是导航引用，尽量不要实时更新位置，定位完毕就关闭掉定位服务
	3. 需要后台定位时，尽量设置pauseLocationUpdateAutomatically为YES，这样，如果用户不太可能移动的时候，系统就会自动暂停位置更新。
	4. 尽量不要使用startMonitoringSignificantLocationChanges，优先考虑startMonitoringForRegion:
* 硬件检测优化:
用户移动、摇晃、倾斜设备时，会产生动作事件（motion），这些事件是由加速度计、陀螺仪、磁力传感器等硬件检测的。在不需要检测的场合，应该及时关闭这些硬件。